<div class="hard-top">
  <div class="my-top container semi-bg">
    <h2>Video recordings</h2>
  </div>
</div>

<div class="container white-bg">
  <div class="content">
    <div class="row">
      <div class="col">
        <img [src]="'//localhost:8000'+userChoices[activeUser].avatar" class="rounded" height="37px" >
        <select (click)="onUserSelectClick()" id="userpicker" [(ngModel)]="activeUser" class="custom-select">
              <option *ngFor="let key of userChoices_keys" [value]="userChoices[key].username">{{userChoices[key].first_name}} {{userChoices[key].last_name}}</option>
        </select><!--<span class="text-muted">({{userChoices[activeUser].username}})</span>-->
      </div>
      <div class="col">
        Advanced mode: <button [routerLink]="['']" class="btn btn-secondary">Off</button>
      </div>
    </div>
    <hr>
    <div class="row">
      <p class="lead">
        <span *ngFor="let tag of tagList">
          <span [ngClass]="['badge', getTagClass(tag.category)]" (click)="addPkToPks(tag.pk)" role="button">
            <i [ngClass]="['fa', getCheckClass(tag.pk)]" aria-hidden="true"></i>&nbsp;&nbsp;{{tag.name}}
          </span>
        </span>
      </p>
      <div *ngIf="periodsSubset?.length == 0" class="col-12">
        No matching sessions
      </div>
      <div *ngFor="let period of periodsSubset" class="col-6 col-sm-3">
        <div class="card text-center" [class.card-inverse]="period.pk==activeSession?.pk" [class.card-primary]="period.pk==activeSession?.pk">
          <div class="card-block card-block-session" role="button" (click)="onSessionSelect(period)">
            <h6 class="card-title">{{period.timestamp|date}}</h6>
            <strong>{{period.video_count}}</strong>&nbsp;<span class="small">video</span>
          </div>
          <div class="dropdown">
            <span class="badge badge-default dropdown-toggle" role="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="fa fa-tag" aria-hidden="true"></i>&nbsp;{{period.labels.length}}&nbsp;tags
            </span>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <p>
                <a *ngFor="let tag of period.labels">
                  <span [innerHTML]="getFormattedTag(tag.name, tag.category)"></span>
                </a>
              </p>
              <div *ngIf="period.labels.length > 0" class="dropdown-divider"></div>
              <a [routerLink]="['','tags']" role="button" class="dropdown-item">
                <i class="fa fa-tag" aria-hidden="true"></i>&nbsp;
                <span>Edit tags</span>
              </a>
            </div>
          </div>
        </div>
        <br>
      </div>
      <div *ngIf="doSessionPagination"  class="col-12">
        <ngb-pagination [disabled]="!doSessionPagination" [collectionSize]="nPeriods" [pageSize]="periodsPerPage" [(page)]="currPageSession" (pageChange)="onSessionPageChange()" size="sm"></ngb-pagination>
      </div>
    </div>
    <hr>
    <!-- Video list -->
    <div class="row">
      <div *ngFor="let video of videoSubset" class="col-6 col-sm-3">
        <div class="card text-center" [class.card-inverse]="video.pk==activeVideo?.pk" [class.card-primary]="video.pk==activeVideo?.pk">
          <div class="card-block card-block-session" role="button" (click)="onVideoSelect(video)">
            <h6 class="card-title">{{video.timestamp+timeZoneString|date:'shortTime'}}</h6>
            <strong>111</strong>&nbsp;<span class="small">video</span>
          </div>
        </div>
        <br>
      </div>
      <div *ngIf="doVideoPagination"  class="col-12">
        <ngb-pagination [disabled]="!doVideoPagination" [collectionSize]="nVideos" [pageSize]="periodsPerPage" [(page)]="currPageVideo" (pageChange)="onVideoPageChange()" size="sm"></ngb-pagination>
      </div>
    </div>
    <hr>
    <!-- Play video -->
  </div>
</div>
